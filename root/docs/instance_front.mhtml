<!-- PAGE_TITLE: @@long_name@@ -->
<!-- PAGE_SUBTITLE: Curate genetic and molecular data from your publications -->
<!-- FLAGS: use_bootstrap -->

<div class="row-fluid">
% if ($canto_offline && !$is_admin_user) {
<& /curs/offline_message.mhtml &>
% } else {
<div class="col-sm-6 col-md-6">
<h3>Curate a paper<% $dest_db_link |n%></h3>
<& /tools/pubmed_id_start.mhtml, title => 'Start curating using a PubMed ID:' &>
<p>
 Once you have found your paper, you can curate GO, phenotypes,
interactions and protein modifications -- or reassign the paper to a
colleague for curation. See the <a href="<% $c->uri_for('/docs/index') %>">help pages</a> for more information.
</p>
</div>

<div class="col-sm-6 col-md-6">

% if (@sessions) {
  <h3>Your curation sessions</h3>
  <ul>
%   for my $session (@sessions) {
%     my $curs_key = $session->{key};
%     my $pubid = $session->{pubid};
<li><a href='<% $c->uri_for("/curs/$curs_key") %>'><% $pubid %></a></li>
%   }
  </ul>
% }
</div>
% }

<div class="col-sm-6 col-md-6">
<h3><% $docs_header %></h3>
<a href="<% $c->uri_for('/docs/') %>" class="btn btn-primary visit">Visit ...</a>
<p>
Find out about community curation and the types of data that can be curating
by viewing our help pages:
</p>
% if (!$config->{demo_mode}) {
<a href="<% $demo_url %>" class="btn btn-primary visit">Demo ...</a>
<p>
  Or try the demo version of Canto:
</p>
</div>
% }

% if (defined $config->{instance_front_mhtml}) {
<div class="col-sm-10 col-md-10">
<& $config->{instance_front_mhtml} &>
</div>
% }
</div>

<%init>
my $config = $c->config();
my $st = $c->stash();

my $tool_name = $config->{name};

my @sessions = ();

my $all_sessions = $c->session()->{all_sessions};

if (defined $all_sessions) {
  @sessions = sort {
    $a->{pubid} cmp $b->{pubid};
  } values %$all_sessions;
}

my $current_user = $c->user();
my $is_admin_user = 0;
if (defined $current_user && $current_user->is_admin()) {
  $is_admin_user = 1;
}

my $canto_offline = $config->{canto_offline};

my $docs_header;

if (@sessions) {
  $docs_header = "Documentation";
} else {
  $docs_header = "First time curator?";
}

my $dest_db_link = '';
my $database_name = $c->config()->{database_name};
my $database_url = $c->config()->{database_url};
if (defined $database_name) {
  $dest_db_link = qq| for $database_name|;
}

my $demo_url = $c->config()->{canto_demo_url};
</%init>
